<p class="text-xl bold text-center">-competitions planning!-</p>


<div class="flex justify-end space-x-4 items-center">
  <p>Add new competition!</p>
  <div class="w-auto h-auto">
    <div class="flex-1 h-full">
      <div (click)="showAddForm = true" class="flex items-center justify-center flex-1 h-full p-2 bg-blue-800 text-white shadow rounded-full">
        <div class="relative">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
          </svg>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="overflow-hidden rounded-lg border border-gray-200 shadow-md m-5">
  <table class="w-full border-collapse bg-white text-left text-sm text-gray-500">
    <thead class="bg-gray-50">
    <tr>
      <th scope="col" class="px-6 py-4 font-medium text-gray-900">Competition Code</th>
      <th scope="col" class="px-6 py-4 font-medium text-gray-900">Competition's amount</th>
      <th scope="col" class="px-6 py-4 font-medium text-gray-900">Competition's Date</th>
      <th scope="col" class="px-6 py-4 font-medium text-gray-900">Competition's Start Time</th>
      <th scope="col" class="px-6 py-4 font-medium text-gray-900">Competition's End Time</th>
      <th scope="col" class="px-6 py-4 font-medium text-gray-900">Competition's Number of Participants</th>
      <th scope="col" class="px-6 py-4 font-medium text-gray-900">Competition's Location</th>
      <th scope="col" class="px-6 py-4 font-medium text-gray-900">Competition's Status</th>
      <th scope="col" class="px-6 py-4 font-medium text-gray-900">Action</th>
    </tr>
    </thead>
    <tbody class="divide-y divide-gray-100 border-t border-gray-100">
    <tr *ngFor="let competition of competitions" class="hover:bg-gray-50">

      <td class="px-6 py-4">
          <span
            class="inline-flex items-center gap-1 rounded-full bg-green-50 px-2 py-1 text-xs font-semibold text-green-600"
          >
            <span class="h-1.5 w-1.5 rounded-full bg-green-600"></span>
            {{ competition.code }}
          </span>
      </td>
      <td class="px-6 py-4">
          <span
            class="inline-flex items-center gap-1 rounded-full bg-green-50 px-2 py-1 text-xs font-semibold text-green-600"
          >
            <span class="h-1.5 w-1.5 rounded-full bg-green-600"></span>
            {{ competition.amount }}
          </span>
      </td>
      <td class="px-6 py-4">
          <span
            class="inline-flex items-center gap-1 rounded-full bg-green-50 px-2 py-1 text-xs font-semibold text-green-600"
          >
            <span class="h-1.5 w-1.5 rounded-full bg-green-600"></span>
            {{ competition.date }}
          </span>
      </td>
      <td class="px-6 py-4">
          <span
            class="inline-flex items-center gap-1 rounded-full bg-green-50 px-2 py-1 text-xs font-semibold text-green-600"
          >
            <span class="h-1.5 w-1.5 rounded-full bg-green-600"></span>
            {{ competition.startTime }}
          </span>
      </td>
      <td class="px-6 py-4">
          <span
            class="inline-flex items-center gap-1 rounded-full bg-green-50 px-2 py-1 text-xs font-semibold text-green-600"
          >
            <span class="h-1.5 w-1.5 rounded-full bg-green-600"></span>
            {{ competition.endTime }}
          </span>
      </td>
      <td class="px-6 py-4">
          <span
            class="inline-flex items-center gap-1 rounded-full bg-green-50 px-2 py-1 text-xs font-semibold text-green-600"
          >
            <span class="h-1.5 w-1.5 rounded-full bg-green-600"></span>
            {{ competition.numberOfParticipants }}
          </span>
      </td>
      <td class="px-6 py-4">
          <span
            class="inline-flex items-center gap-1 rounded-full bg-green-50 px-2 py-1 text-xs font-semibold text-green-600"
          >
            <span class="h-1.5 w-1.5 rounded-full bg-green-600"></span>
            {{ competition.location }}
          </span>
      </td>

<!--      <td class="px-6 py-4">-->
<!--        -->
<!--  <span-->
<!--    class="inline-flex items-center gap-1 rounded-full bg-green-50 px-2 py-1 text-xs font-semibold text-green-600"-->
<!--  >-->
<!--    <span class="h-1.5 w-1.5 rounded-full bg-green-600"></span>-->
<!--    {{ getCompetitionStatus(competition.date) }}-->
<!--  </span>-->
<!--      </td>-->

      <td class="px-6 py-4">
        <div *ngIf="getCompetitionStatus(competition.date) === 'Passed'; ">
    <span
      class="inline-flex items-center gap-1 rounded-full bg-red-500 px-2 py-1 text-xs font-semibold text-white"
    >
      {{ getCompetitionStatus(competition.date) }}
    </span>
        </div>


        <div *ngIf="getCompetitionStatus(competition.date) === 'In Progress'; ">

    <span
      class="inline-flex items-center gap-1 rounded-full bg-yellow-500 px-2 py-1 text-xs font-semibold text-white"
    >

      {{ getCompetitionStatus(competition.date) }}
    </span>
          </div>

        <div *ngIf="getCompetitionStatus(competition.date) === 'Next'; ">
          <span
            class="inline-flex items-center gap-1 rounded-full bg-green-500 px-2 py-1 text-xs font-semibold text-white"
          >

            {{ getCompetitionStatus(competition.date) }}
    </span>
        </div>
      </td>


      <td class="px-6 py-4">
        <div class="flex justify-start gap-4">
          <!--          <a x-data="{ tooltip: 'Delete' }" href="#">-->
          <button (click)="deleteCompetition(competition.code)">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="h-6 w-6"
              x-tooltip="tooltip"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"
              />
            </svg>
          </button>

          <button (click)="updateCompetition(competition.code)">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="h-6 w-6"
              x-tooltip="tooltip"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"
              />
            </svg>
          </button>
<!--          <button (click)="assignMember(competition.code)" class="bg-pink-500 text-white rounded">-->
<!--            Assign to Member-->
<!--          </button>-->
          <button
            (click)="assignMember(competition.code)"
            class="rounded px-1 py-1 text-white"
            [ngClass]="{
    'bg-pink-500': getCompetitionStatus(competition.date) === 'Next',
    'bg-gray-400 cursor-not-allowed': getCompetitionStatus(competition.date) !== 'Next'
  }"
            [disabled]="getCompetitionStatus(competition.date) !== 'Next'"
          >
            Assign to Member
          </button>


          <button
            (click)="addHunting(competition.code)"
            class="rounded px-1 py-1 text-white"
            [ngClass]="{
    'bg-pink-500': getCompetitionStatus(competition.date) === 'In Progress',
    'bg-gray-400 cursor-not-allowed': getCompetitionStatus(competition.date) !== 'In Progress'
  }"
            [disabled]="getCompetitionStatus(competition.date) !== 'In Progress'"
          >
            Go Hunt
          </button>

        </div>
      </td>
    </tr>


    </tbody>
  </table>
</div>

<nav aria-label="Page navigation example" class="flex justify-center ">
  <ul class="inline-flex -space-x-px text-base h-10">
    <li *ngFor="let page of pages">
      <a [routerLink]="'/competitions'" (click)="loadPage(page)"
         [class.active-page]="currentPage === page"
         class="flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white
                transition-colors duration-300 ease-in-out
                focus:outline-none"
      >{{ page }}</a>
    </li>
  </ul>
</nav>


<!-- hunting form -->
<div *ngIf="isHuntingMode" class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50">
  <div class="bg-white rounded-lg p-6 max-w-md">

    add form
    <form [formGroup]="huntingForm" (ngSubmit)="submitNewHunting()">

      <label for="memberNumber" class="block mb-2">member's number:</label>
      <input type="number" id="memberNumber" name="memberNumber" formControlName="memberNumber"
             class=" w-full border border-gray-300 rounded-md px-3 py-2 mb-4 focus:outline-none focus:border-blue-500">



      <label for="fish" class="block mb-2">What Fish?</label>
      <select id="fish" name="fish" formControlName="fish"
              class="w-full border border-gray-300 rounded-md px-3 py-2 mb-4 focus:outline-none focus:border-blue-500"
            >
        <option value="">Select fish name</option>
        <option *ngFor="let fish of fishes" [value]="fish.name"   (change)="onFishSelection(fish.name)">{{ fish.name }}</option>
      </select>

      <div *ngIf="selectedFish" class="bg-green-400">
        Average Weight: {{ selectedFish.averageWeight }}
      </div>

      <label for="fishNumber" class="block mb-2">Number of Fishes:</label>
      <input type="number" id="fishNumber" name="fishNumber" formControlName="fishNumber"
             class="w-full border border-gray-300 rounded-md px-3 py-2 mb-4 focus:outline-none focus:border-blue-500">



      <div class="flex justify-end">
        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-md mr-2">Add</button>
        <button type="button" (click)="cancelHunting()" class="bg-gray-500 text-white px-4 py-2 rounded-md">Cancel</button>
      </div>
    </form>

  </div>
</div>



<!-- assign form -->
<div *ngIf="isAssignMode" class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50">
  <div class="bg-white rounded-lg p-6 max-w-md">
    assign form
    <form [formGroup]="assignForm" (ngSubmit)="submitAssign()">
      <label for="memberNum" class="block mb-2">Member's number:</label>
      <input type="number" id="memberNum" name="memberNum" formControlName="memberNum"
             class="w-full border border-gray-300 rounded-md px-3 py-2 mb-4 focus:outline-none focus:border-blue-500">
      <a [routerLink]="'/members'">Member Not registered?</a>
      <div class="flex justify-end">
        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-md mr-2">Assign</button>
        <button type="button" (click)="cancelAssign()" class="bg-gray-500 text-white px-4 py-2 rounded-md">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!-- Update form -->
<div *ngIf="isUpdateMode" class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50">
  <div class="bg-white rounded-lg p-6 max-w-md">
    Update form
    <form [formGroup]="updateForm" (ngSubmit)="submitUpdate()">
      <label for="competitionAmount" class="block mb-2">Competition's Amount:</label>
      <input type="number" id="competitionAmount" name="competitionAmount" formControlName="competitionAmount"
             class="w-full border border-gray-300 rounded-md px-3 py-2 mb-4 focus:outline-none focus:border-blue-500">

<!--      <label for="competitionDate" class="block mb-2">Competition's Date:</label>-->
<!--      <select id="competitionDate" name="competitionDate" formControlName="competitionDate"-->
<!--              class="w-full border border-gray-300 rounded-md px-3 py-2 mb-4 focus:outline-none focus:border-blue-500">-->
<!--      </select>-->
      <div class="mb-5">
        <div class="flex justify-between items-center space-x-4">
        <label for="competitionDate" class="mb-3 block text-base font-medium text-[#07074D]">
          Competition Date:
        </label>

        </div>
        <input type="date" name="competitionDate" id="competitionDate" formControlName="competitionDate"
               class="w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md" />
      </div>


      <div class="mb-5">
        <div class="flex justify-between items-center space-x-4">
          <label for="competitionStartTime" class="mb-3 block text-base font-medium text-[#07074D]">
            Competition start time:
          </label>
        </div>
        <input type="time" name="competitionStartTime" id="competitionStartTime" formControlName="competitionStartTime"
               step="1" class="w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md" />
      </div>

      <div class="mb-5">
        <div class="flex justify-between items-center space-x-4">
          <label for="competitionEndTime" class="mb-3 block text-base font-medium text-[#07074D]">
            Competition end time:
          </label>
        </div>
        <input type="time" name="competitionEndTime" id="competitionEndTime" formControlName="competitionEndTime"
               step="1" class="w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md" />
      </div>



      <label for="competitionLocation" class="block mb-2">Competition's Location:</label>
      <input type="text" id="competitionLocation" name="competitionLocation" formControlName="competitionLocation"
             class="w-full border border-gray-300 rounded-md px-3 py-2 mb-4 focus:outline-none focus:border-blue-500">

      <label for="competitionNBParticipants" class="block mb-2">Competition's participants number:</label>
      <input type="number" id="competitionNBParticipants" name="competitionNBParticipants" formControlName="competitionNBParticipants"
             class="w-full border border-gray-300 rounded-md px-3 py-2 mb-4 focus:outline-none focus:border-blue-500">


      <div class="flex justify-end">
        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-md mr-2">Update</button>
        <button type="button" (click)="cancelUpdate()" class="bg-gray-500 text-white px-4 py-2 rounded-md">Cancel</button>
      </div>
    </form>
  </div>
</div>
<!--add form-->

<div *ngIf="showAddForm" class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50">
  <div class="bg-white rounded-lg p-6 max-w-md">
    add form
    <form [formGroup]="addForm" (ngSubmit)="submitNewCompetition()">
      <label for="amount" class="block mb-2">Competition's text:</label>
      <input type="number" id="amount" name="amount" formControlName="amount"
             class="w-full border border-gray-300 rounded-md px-3 py-2 mb-4 focus:outline-none focus:border-blue-500">

      <div class="mb-5">
        <div class="flex justify-between items-center space-x-4">
          <label for="date" class="mb-3 block text-base font-medium text-[#07074D]">
            Competition Date:
          </label>

        </div>
        <input type="date" name="date" id="date" formControlName="date"
               class="w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md" />
      </div>


      <div class="mb-5">
        <div class="flex justify-between items-center space-x-4">
          <label for="startTime" class="mb-3 block text-base font-medium text-[#07074D]">
            Competition start time:
          </label>

        </div>
        <input type="time" name="startTime" id="startTime" formControlName="startTime"
               class="w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md" />
      </div>

      <div class="mb-5">
        <div class="flex justify-between items-center space-x-4">
          <label for="endTime" class="mb-3 block text-base font-medium text-[#07074D]">
            Competition end time:
          </label>
        </div>
        <input type="time" name="endTime" id="endTime" formControlName="endTime"
               class="w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md" />
      </div>


      <label for="location" class="block mb-2">Competition's Location:</label>
      <input type="text" id="location" name="location" formControlName="location"
             class="w-full border border-gray-300 rounded-md px-3 py-2 mb-4 focus:outline-none focus:border-blue-500">

      <label for="nbParticipants" class="block mb-2">Competition's participants number:</label>
      <input type="number" id="nbParticipants" name="nbParticipants" formControlName="nbParticipants"
             class="w-full border border-gray-300 rounded-md px-3 py-2 mb-4 focus:outline-none focus:border-blue-500">



      <div class="flex justify-end">
        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-md mr-2">Add</button>
        <button type="button" (click)="cancelAdd()" class="bg-gray-500 text-white px-4 py-2 rounded-md">Cancel</button>
      </div>
    </form>
  </div>
</div>


